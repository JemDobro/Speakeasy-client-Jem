(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,n){e.exports=n(139)},137:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(82),s=n.n(o),i=n(19),c=n(7),u=n(9),l=n(10),m=n(12),p=n(11),h=n(13),d=n(89),b=n.n(d),f=n(51),g=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_BASE_URL||"http://localhost:8080/api",O=function(e){return e.ok?e:e.headers.has("content-type")&&e.headers.get("content-type").startsWith("application/json")?e.json().then(function(e){return Promise.reject(e)}):Promise.reject({code:e.status,message:e.statusText})},j=function(){try{localStorage.removeItem("authToken")}catch(e){}},y="SET_AUTH_TOKEN",E=function(e){return{type:y,authToken:e}},v="CLEAR_AUTH",w=function(){return{type:v}},k="AUTH_REQUEST",S=function(){return{type:k}},T="AUTH_SUCCESS",N="AUTH_ERROR",C=function(e){return{type:N,error:e}},U=function(e,t){var n,r=b()(e);t(E(e)),t((n=r.user,{type:T,currentUser:n})),function(e){try{localStorage.setItem("authToken",e)}catch(t){}}(e)},A=function(e,t){return function(n){return n(S()),fetch("".concat(g,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then(function(e){return O(e)}).then(function(e){return e.json()}).then(function(e){var t=e.authToken;return U(t,n)}).catch(function(e){var t=401===e.code?"Incorrect username or password":"Unable to login, please try again";return n(C(e)),Promise.reject(new f.a({_error:t}))})}},I=function(){return function(e,t){e(S());var n=t().auth.authToken;return fetch("".concat(g,"/auth/refresh"),{method:"POST",headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){return O(e)}).then(function(e){return e.json()}).then(function(t){var n=t.authToken;return U(n,e)}).catch(function(t){e(C(t)),e(w()),j()})}},q=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"logOut",value:function(){this.props.dispatch(w()),j()}},{key:"render",value:function(){var e,t=this;return this.props.loggedIn&&(e=a.a.createElement("button",{onClick:function(){return t.logOut()}},"Log out")),a.a.createElement("div",{className:"header-bar"},a.a.createElement("h1",null,"Speakeasy"),e)}}]),t}(a.a.Component),R=Object(c.b)(function(e){return{loggedIn:null!==e.auth.currentUser}})(q),_=n(55),F=n(54),P=n(26),x=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){!e.meta.active&&this.props.meta.active&&this.input.focus()}},{key:"render",value:function(){var e,t,n=this;return this.props.meta.touched&&this.props.meta.error&&(e=a.a.createElement("div",{className:"form-error"},this.props.meta.error)),this.props.meta.touched&&this.props.meta.warning&&(t=a.a.createElement("div",{className:"form-warning"},this.props.meta.warning)),a.a.createElement("div",{className:"form-input"},a.a.createElement("label",{htmlFor:this.props.input.name},this.props.label,e,t),a.a.createElement("input",Object.assign({},this.props.input,{id:this.props.input.name,type:this.props.type,ref:function(e){return n.input=e}})))}}]),t}(a.a.Component),Q=function(e){return e?void 0:"Required"},L=function(e){return""!==e.trim()?void 0:"Cannot be empty"},D=function(e){return e.trim()===e?void 0:"Cannot start or end with whitespace"},H=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onSubmit",value:function(e){return this.props.dispatch(A(e.username,e.password))}},{key:"render",value:function(){var e,t=this;return this.props.error&&(e=a.a.createElement("div",{className:"form-error","aria-live":"polite"},this.props.error)),a.a.createElement("form",{className:"login-form",onSubmit:this.props.handleSubmit(function(e){return t.onSubmit(e)})},e,a.a.createElement("label",{htmlFor:"username"},"Username"),a.a.createElement(_.a,{component:x,type:"text",name:"username",id:"username",validate:[Q,L]}),a.a.createElement("label",{htmlFor:"password"},"Password"),a.a.createElement(_.a,{component:x,type:"password",name:"password",id:"password",validate:[Q,L]}),a.a.createElement("button",{disabled:this.props.pristine||this.props.submitting},"Log in"))}}]),t}(a.a.Component),B=Object(F.a)({form:"login",onSubmitFail:function(e,t){return t(Object(P.a)("login","username"))}})(H);var M,W,J=Object(c.b)(function(e){return{loggedIn:null!==e.auth.currentUser}})(function(e){return e.loggedIn?a.a.createElement(i.c,{to:"/dashboard"}):a.a.createElement("div",{className:"home"},a.a.createElement("h2",null,"Welcome to Speakeasy...do you know the secret knock?"),a.a.createElement(B,null),a.a.createElement("p",null,"Do you find yourself nodding along with your smart tech friends, coworkers, or worse, your boss, as if you understand the latest tech jargon? All the while, secretly hoping that you won't have to feign choking on your drink if someone asks you a question? Are you yearning to get into the club but can't quite speak the language? Step into Speakeasy, learn the language, up your stats and your status as you keep up to date with all the latest secret knocks that open doors... "),a.a.createElement(i.b,{to:"/register"},"Become one of the club"))}),Y=n(94),z="FETCH_QUESTIONS_REQUEST",V="FETCH_QUESTIONS_SUCCESS",G="FETCH_QUESTIONS_ERROR",K="ANSWER_SUBMITTED",X=function(){return function(e,t){var n=t().auth.authToken;return fetch("".concat(g,"/questions"),{method:"GET",headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){return O(e)}).then(function(e){return e.json()}).then(function(t){return e({type:V,questions:t})}).catch(function(t){e({type:G,error:t})})}},Z=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props),this.props.dispatch(X())}},{key:"render",value:function(){return console.log("In render",this.props),this.props.questions.length<1?a.a.createElement("div",null,"Loading..."):a.a.createElement("div",{className:"question"},a.a.createElement("p",null,"Question: ".concat(this.props.questions[0].question)))}}]),t}(a.a.Component),$=Object(c.b)(function(e){return{questions:e.questions.questions}})(Z),ee=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onSubmit",value:function(e){var t;console.log(e.answer),this.props.dispatch((t=e.answer,{type:K,answer:t}))}},{key:"render",value:function(){var e,t=this;return this.props.error&&(e=a.a.createElement("div",{className:"form-error","aria-live":"polite"},this.props.error)),a.a.createElement("form",{className:"answer-submit-form",onSubmit:this.props.handleSubmit(function(e){return t.onSubmit(e)})},e,a.a.createElement("label",{htmlFor:"answer"},"Your answer:"),a.a.createElement(_.a,{component:x,type:"text",name:"answer",id:"answer",validate:[Q,L]}),a.a.createElement("button",{disabled:this.props.pristine||this.props.submitting},"Submit"))}}]),t}(a.a.Component),te=Object(F.a)({form:"AnswerSubmitForm",onSubmitFail:function(e,t){return t(Object(P.a)("AnswerSubmitForm",Object.keys(e)[0]))}})(ee),ne=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log("feedback component mounted")}},{key:"render",value:function(){return a.a.createElement("div",{className:"feedback"},a.a.createElement("p",null,"You answered: ".concat(this.props.answer)))}}]),t}(a.a.Component),re=Object(c.b)(function(e){return{answer:e.questions.answer}})(ne),ae=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return null!==this.props.answer?a.a.createElement(re,null):a.a.createElement(te,null)}}]),t}(a.a.Component),oe=Object(c.b)(function(e){return{answer:e.questions.answer}})(ae),se=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"sessionStats"},a.a.createElement("p",null,"".concat(Math.round(this.props.questionsAnsweredCorrectly/this.props.totalQuestionsAnswered*100*100)/100,"%!  You've answered: ").concat(this.props.questionsAnsweredCorrectly," out of ").concat(this.props.totalQuestionsAnswered," questions correctly!")))}}]),t}(a.a.Component),ie=Object(c.b)(function(e){return{questionsAnsweredCorrectly:e.questions.questionsAnsweredCorrectly,totalQuestionsAnswered:e.questions.totalQuestionsAnswered}})(se),ce=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"dashboard"},a.a.createElement("h2",null,"Hello ".concat(this.props.firstName,", welcome to the club...")),a.a.createElement($,null),a.a.createElement(oe,null),a.a.createElement(ie,null))}}]),t}(a.a.Component),ue=function(e){function t(t){var n=t.authenticating,r=t.loggedIn,o=t.error,s=Object(Y.a)(t,["authenticating","loggedIn","error"]);return n?a.a.createElement("div",null,"Logging in..."):!r||o?a.a.createElement(i.c,{to:"/"}):a.a.createElement(e,s)}var n=e.displayName||e.name||"Component";return t.displayName="RequiresLogin(".concat(n,")"),Object(c.b)(function(e,t){return{authenticating:e.auth.loading,loggedIn:null!==e.auth.currentUser,error:e.auth.error}})(t)}(Object(c.b)(function(e){var t=e.auth.currentUser;return{username:e.auth.currentUser.username,firstName:"".concat(t.firstName)}})(ce)),le=n(66),me=(M={min:10,max:72},function(e){return M.min&&e.length<M.min?"Must be at least ".concat(M.min," characters long"):M.max&&e.length>M.max?"Must be at most ".concat(M.max," characters long"):void 0}),pe=(W="password",function(e,t){return W in t&&e.trim()===t[W].trim()?void 0:"Does not match"}),he=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onSubmit",value:function(e){var t=this,n=e.username,r=e.password,a=e.firstName,o=e.lastName,s={username:n,password:r,firstName:a,lastName:o};return this.props.dispatch(function(e){return function(t){return fetch("".concat(g,"/users"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return O(e)}).then(function(e){return e.json()}).catch(function(e){var t=e.reason,n=e.message,r=e.location;if("ValidationError"===t)return Promise.reject(new f.a(Object(le.a)({},r,n)))})}}(s)).then(function(){return t.props.dispatch(A(n,r))})}},{key:"render",value:function(){var e=this;return a.a.createElement("form",{className:"login-form",onSubmit:this.props.handleSubmit(function(t){return e.onSubmit(t)})},a.a.createElement("label",{htmlFor:"firstName"},"First name"),a.a.createElement(_.a,{component:x,type:"text",name:"firstName",validate:[Q,L]}),a.a.createElement("label",{htmlFor:"lastName"},"Last name"),a.a.createElement(_.a,{component:x,type:"text",name:"lastName"}),a.a.createElement("label",{htmlFor:"username"},"Username"),a.a.createElement(_.a,{component:x,type:"text",name:"username",validate:[Q,L,D]}),a.a.createElement("label",{htmlFor:"password"},"Password"),a.a.createElement(_.a,{component:x,type:"password",name:"password",validate:[Q,me,D]}),a.a.createElement("label",{htmlFor:"passwordConfirm"},"Confirm password"),a.a.createElement(_.a,{component:x,type:"password",name:"passwordConfirm",validate:[Q,L,pe]}),a.a.createElement("button",{type:"submit",disabled:this.props.pristine||this.props.submitting},"Register"))}}]),t}(a.a.Component),de=Object(F.a)({form:"registration",onSubmitFail:function(e,t){return t(Object(P.a)("registration",Object.keys(e)[0]))}})(he);var be=Object(c.b)(function(e){return{loggedIn:null!==e.auth.currentUser}})(function(e){return e.loggedIn?a.a.createElement(i.c,{to:"/dashboard"}):a.a.createElement("div",{className:"home"},a.a.createElement("h2",null,"You're almost in! Register here to become one of the club"),a.a.createElement(de,null),a.a.createElement(i.b,{to:"/"},"Login"))}),fe=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){!e.loggedIn&&this.props.loggedIn?this.startPeriodicRefresh():e.loggedIn&&!this.props.loggedIn&&this.stopPeriodicRefresh()}},{key:"componentWillUnmount",value:function(){this.stopPeriodicRefresh()}},{key:"startPeriodicRefresh",value:function(){var e=this;this.refreshInterval=setInterval(function(){return e.props.dispatch(I())},36e5)}},{key:"stopPeriodicRefresh",value:function(){this.refreshInterval&&clearInterval(this.refreshInterval)}},{key:"render",value:function(){return a.a.createElement("div",{className:"app"},a.a.createElement(R,null),a.a.createElement(i.d,{exact:!0,path:"/",component:J}),a.a.createElement(i.d,{exact:!0,path:"/dashboard",component:ue}),a.a.createElement(i.d,{exact:!0,path:"/register",component:be}))}}]),t}(a.a.Component),ge=Object(i.e)(Object(c.b)(function(e){return{hasAuthToken:null!==e.auth.authToken,loggedIn:null!==e.auth.currentUser}})(fe)),Oe=n(15),je=n(56),ye=n(92),Ee=n.n(ye),ve={authToken:null,currentUser:null,loading:!1,error:null};var we=n(57),ke={questions:[],answer:null,totalQuestionsAnswered:98,questionsAnsweredCorrectly:33,loading:!1,error:null};var Se=n(93),Te=Object(Oe.createStore)(Object(Oe.combineReducers)({form:je.a,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;return t.type===y?Object.assign({},e,{authToken:t.authToken}):t.type===v?Object.assign({},e,{authToken:null,currentUser:null}):t.type===k?Object.assign({},e,{loading:!0,error:null}):t.type===T?Object.assign({},e,{loading:!1,currentUser:t.currentUser}):t.type===N?Object.assign({},e,{loading:!1,error:t.error}):e},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(we.a)({},e,{loading:!0});case V:return Object(we.a)({},e,{questions:t.questions});case G:return Object(we.a)({},e,{error:t.error});case K:return Object(we.a)({},e,{answer:t.answer,totalQuestionsAnswered:e.totalQuestionsAnswered+1,questionsAnsweredCorrectly:e.questionsAnsweredCorrectly+1});default:return e}}}),Object(Se.composeWithDevTools)(Object(Oe.applyMiddleware)(Ee.a))),Ne=localStorage.getItem("authToken");if(Ne){console.log("there is an auth token");var Ce=Ne;Te.dispatch(E(Ce)),Te.dispatch(I())}var Ue=Te;n(137);s.a.render(a.a.createElement(i.a,null,a.a.createElement(c.a,{store:Ue},a.a.createElement(ge,null))),document.getElementById("root"))}},[[118,2,1]]]);
//# sourceMappingURL=main.321a3501.chunk.js.map